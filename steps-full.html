<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç«è½¦ç¥¨æŸ¥è¯¢ - æ¸è¿›å¼ä»£ç æ•™ç¨‹(å®Œæ•´ç‰ˆ)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="code-style.css">
    <style>
        .step-progress {
            display: flex;
            gap: 5px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .step-badge {
            padding: 8px 15px;
            background: #21262d;
            border-radius: 20px;
            font-size: 12px;
            color: #8b949e;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid #30363d;
        }
        .step-badge:hover {
            background: #30363d;
            color: #c9d1d9;
        }
        .step-badge.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }
        .score {
            background: rgba(82, 196, 26, 0.2);
            color: #52C41A;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            margin-left: 5px;
        }
        .step-info {
            background: #161b22;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #30363d;
        }
        .step-info h4 {
            color: #58a6ff;
            margin-bottom: 10px;
        }
        .step-info ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .step-info li {
            color: #8b949e;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <h1>ğŸš„ ç«è½¦ç¥¨æŸ¥è¯¢ - æ¸è¿›å¼ä»£ç æ•™ç¨‹(å®Œæ•´ç‰ˆ)</h1>
            <a href="index.html" class="home-link">è¿”å›é¦–é¡µ</a>
        </div>
    </nav>

    <div class="container">
        <div class="project-info">
            <h2>æ¸è¿›å¼å­¦ä¹ æ–¹æ¡ˆ</h2>
            <p>æœ¬æ•™ç¨‹å°†ç«è½¦ç¥¨æŸ¥è¯¢ç³»ç»Ÿçš„ä»£ç æŒ‰ç…§<strong>13ä¸ªåŠŸèƒ½ç‚¹</strong>æ¸è¿›å¼å±•ç¤ºã€‚</p>
            <p><strong>æ¯ä¸ªStepéƒ½æ˜¯å®Œæ•´å¯è¿è¡Œçš„ä»£ç ï¼Œå¹¶ç´¯ç§¯åŒ…å«å‰é¢æ‰€æœ‰æ­¥éª¤çš„åŠŸèƒ½ã€‚</strong></p>
            <p style="margin-top: 15px;">ğŸ“š é€‰æ‹©ä¸‹æ–¹ä»»æ„æ­¥éª¤æŸ¥çœ‹è¯¥é˜¶æ®µçš„å®Œæ•´ä»£ç  | â±ï¸ åŠ è½½å®Œæˆ</p>
        </div>

        <div class="step-progress">
            <div class="step-badge active" data-step="1">Step01<span class="score">10åˆ†</span></div>
            <div class="step-badge" data-step="2">Step02<span class="score">5åˆ†</span></div>
            <div class="step-badge" data-step="3">Step03<span class="score">3åˆ†</span></div>
            <div class="step-badge" data-step="4">Step04<span class="score">3åˆ†</span></div>
            <div class="step-badge" data-step="5">Step05<span class="score">5åˆ†</span></div>
            <div class="step-badge" data-step="6">Step06<span class="score">5åˆ†</span></div>
            <div class="step-badge" data-step="7">Step07<span class="score">2åˆ†</span></div>
            <div class="step-badge" data-step="8">Step08<span class="score">3åˆ†</span></div>
            <div class="step-badge" data-step="9">Step09<span class="score">4åˆ†</span></div>
            <div class="step-badge" data-step="10">Step10<span class="score">4åˆ†</span></div>
            <div class="step-badge" data-step="11">Step11<span class="score">3åˆ†</span></div>
            <div class="step-badge" data-step="12">Step12<span class="score">3åˆ†</span></div>
            <div class="step-badge" data-step="13">Step13<span class="score">5åˆ†</span></div>
        </div>

        <!-- Step 1 -->
        <div class="code-container" id="step-1" style="display: block;">
            <div class="step-info">
                <h4>ğŸ“ Step01 - åŸå¸‚é€‰æ‹©åŠŸèƒ½ï¼ˆ10åˆ†ï¼‰</h4>
                <ul>
                    <li>âœ… è¯»å–city.jsonè·å–åŸå¸‚æ•°æ®</li>
                    <li>âœ… æ˜¾ç¤ºå‡ºå‘åœ°/ç›®çš„åœ°é€‰æ‹©</li>
                    <li>âœ… å¼¹å‡ºåŸå¸‚åˆ—è¡¨å¯¹è¯æ¡†</li>
                </ul>
            </div>
            <h3>ğŸ“„ Index.ets</h3>
            <pre><code class="language-typescript">import router from '@ohos.router'
import { resourceManager } from '@kit.LocalizationKit'
import { util } from '@kit.ArkTS'
import { CityModel } from '../model/CityModel'

@Entry
@Component
struct Index {
  @State startCity: string = 'è¯·é€‰æ‹©'
  @State endCity: string = 'è¯·é€‰æ‹©'
  @State cityList: string[] = []
  @State showCityDialog: boolean = false
  @State selectType: string = ''

  async aboutToAppear() {
    await this.loadCityData()
  }

  async loadCityData() {
    try {
      const context = getContext(this)
      const mgr: resourceManager.ResourceManager = context.resourceManager
      const rawFileData: Uint8Array = await mgr.getRawFileContent('city.json')
      const textDecoder = util.TextDecoder.create('utf-8')
      const jsonStr: string = textDecoder.decodeToString(rawFileData)
      const cityModel: CityModel = JSON.parse(jsonStr)
      this.cityList = cityModel.cities
    } catch (error) {
      console.error('è¯»å–åŸå¸‚æ•°æ®å¤±è´¥:', error)
    }
  }

  openCityDialog(type: string) {
    this.selectType = type
    this.showCityDialog = true
  }

  selectCity(city: string) {
    if (this.selectType === 'start') {
      this.startCity = city
    } else {
      this.endCity = city
    }
    this.showCityDialog = false
  }

  @Builder
  cityDialogBuilder() {
    Column() {
      Text('é€‰æ‹©åŸå¸‚')
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .padding(15)

      List() {
        ForEach(this.cityList, (city: string) => {
          ListItem() {
            Text(city)
              .width('100%')
              .padding(15)
              .onClick(() => this.selectCity(city))
          }
        })
      }
      .height('80%')

      Button('å–æ¶ˆ')
        .width('90%')
        .margin({ top: 10, bottom: 10 })
        .onClick(() => this.showCityDialog = false)
    }
    .width('100%')
    .height('100%')
    .backgroundColor(Color.White)
  }

  build() {
    Stack() {
      Column() {
        Text('ç«è½¦ç¥¨æŸ¥è¯¢')
          .fontSize(24)
          .fontWeight(FontWeight.Bold)
          .margin({ top: 20, bottom: 30 })

        Column() {
          Row() {
            Text('å‡ºå‘åœ°')
              .width(80)
            Text(this.startCity)
              .layoutWeight(1)
              .textAlign(TextAlign.End)
            Image($r('app.media.startIcon'))
              .width(20)
              .height(20)
              .margin({ left: 10 })
          }
          .width('100%')
          .padding(15)
          .backgroundColor(Color.White)
          .borderRadius(8)
          .onClick(() => this.openCityDialog('start'))

          Row() {
            Text('ç›®çš„åœ°')
              .width(80)
            Text(this.endCity)
              .layoutWeight(1)
              .textAlign(TextAlign.End)
            Image($r('app.media.startIcon'))
              .width(20)
              .height(20)
              .margin({ left: 10 })
          }
          .width('100%')
          .padding(15)
          .backgroundColor(Color.White)
          .borderRadius(8)
          .margin({ top: 10 })
          .onClick(() => this.openCityDialog('end'))
        }
        .width('90%')
        .margin({ top: 20 })
      }
      .width('100%')
      .height('100%')
      .backgroundColor('#F5F5F5')

      if (this.showCityDialog) {
        this.cityDialogBuilder()
      }
    }
    .width('100%')
    .height('100%')
  }
}</code></pre>

            <h3>ğŸ“„ CityModel.ets</h3>
            <pre><code class="language-typescript">export class CityModel {
  cities: string[] = []
}</code></pre>
        </div>

        <!-- Step 2 -->
        <div class="code-container" id="step-2" style="display: none;">
            <div class="step-info">
                <h4>ğŸ“ Step02 - æ—¥æœŸé€‰æ‹©åŠŸèƒ½ï¼ˆ5åˆ†ï¼‰</h4>
                <ul>
                    <li>ğŸ”„ åŒ…å«Step01æ‰€æœ‰åŠŸèƒ½</li>
                    <li>âœ… æ–°å¢æ—¥æœŸé€‰æ‹©åŠŸèƒ½</li>
                    <li>âœ… é»˜è®¤æ˜¾ç¤ºä»Šå¤©æ—¥æœŸ</li>
                </ul>
            </div>
            <h3>ğŸ“„ Index.etsï¼ˆå®Œæ•´ä»£ç ï¼‰</h3>
            <pre><code class="language-typescript">import router from '@ohos.router'
import { resourceManager } from '@kit.LocalizationKit'
import { util } from '@kit.ArkTS'
import { CityModel } from '../model/CityModel'

@Entry
@Component
struct Index {
  @State startCity: string = 'è¯·é€‰æ‹©'
  @State endCity: string = 'è¯·é€‰æ‹©'
  @State selectedDate: string = this.getTodayDate()
  @State cityList: string[] = []
  @State showCityDialog: boolean = false
  @State selectType: string = ''

  async aboutToAppear() {
    await this.loadCityData()
  }

  getTodayDate(): string {
    const date = new Date()
    const year = date.getFullYear()
    const month = (date.getMonth() + 1).toString().padStart(2, '0')
    const day = date.getDate().toString().padStart(2, '0')
    return \`\${year}-\${month}-\${day}\`
  }

  async loadCityData() {
    try {
      const context = getContext(this)
      const mgr: resourceManager.ResourceManager = context.resourceManager
      const rawFileData: Uint8Array = await mgr.getRawFileContent('city.json')
      const textDecoder = util.TextDecoder.create('utf-8')
      const jsonStr: string = textDecoder.decodeToString(rawFileData)
      const cityModel: CityModel = JSON.parse(jsonStr)
      this.cityList = cityModel.cities
    } catch (error) {
      console.error('è¯»å–åŸå¸‚æ•°æ®å¤±è´¥:', error)
    }
  }

  openCityDialog(type: string) {
    this.selectType = type
    this.showCityDialog = true
  }

  selectCity(city: string) {
    if (this.selectType === 'start') {
      this.startCity = city
    } else {
      this.endCity = city
    }
    this.showCityDialog = false
  }

  @Builder
  cityDialogBuilder() {
    Column() {
      Text('é€‰æ‹©åŸå¸‚')
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .padding(15)

      List() {
        ForEach(this.cityList, (city: string) => {
          ListItem() {
            Text(city)
              .width('100%')
              .padding(15)
              .onClick(() => this.selectCity(city))
          }
        })
      }
      .height('80%')

      Button('å–æ¶ˆ')
        .width('90%')
        .margin({ top: 10, bottom: 10 })
        .onClick(() => this.showCityDialog = false)
    }
    .width('100%')
    .height('100%')
    .backgroundColor(Color.White)
  }

  build() {
    Stack() {
      Column() {
        Text('ç«è½¦ç¥¨æŸ¥è¯¢')
          .fontSize(24)
          .fontWeight(FontWeight.Bold)
          .margin({ top: 20, bottom: 30 })

        Column() {
          Row() {
            Text('å‡ºå‘åœ°')
              .width(80)
            Text(this.startCity)
              .layoutWeight(1)
              .textAlign(TextAlign.End)
            Image($r('app.media.startIcon'))
              .width(20)
              .height(20)
              .margin({ left: 10 })
          }
          .width('100%')
          .padding(15)
          .backgroundColor(Color.White)
          .borderRadius(8)
          .onClick(() => this.openCityDialog('start'))

          Row() {
            Text('ç›®çš„åœ°')
              .width(80)
            Text(this.endCity)
              .layoutWeight(1)
              .textAlign(TextAlign.End)
            Image($r('app.media.startIcon'))
              .width(20)
              .height(20)
              .margin({ left: 10 })
          }
          .width('100%')
          .padding(15)
          .backgroundColor(Color.White)
          .borderRadius(8)
          .margin({ top: 10 })
          .onClick(() => this.openCityDialog('end'))

          Row() {
            Text('å‡ºå‘æ—¥æœŸ')
              .width(80)
            Text(this.selectedDate)
              .layoutWeight(1)
              .textAlign(TextAlign.End)
            Image($r('app.media.startIcon'))
              .width(20)
              .height(20)
              .margin({ left: 10 })
          }
          .width('100%')
          .padding(15)
          .backgroundColor(Color.White)
          .borderRadius(8)
          .margin({ top: 10 })
          .onClick(() => {
            DatePickerDialog.show({
              start: new Date(),
              selected: new Date(this.selectedDate),
              onAccept: (value: DatePickerResult) => {
                const month = value.month !== undefined ? value.month + 1 : 1
                const day = value.day !== undefined ? value.day : 1
                this.selectedDate = \`\${value.year}-\${month.toString().padStart(2, '0')}-\${day.toString().padStart(2, '0')}\`
              }
            })
          })
        }
        .width('90%')
        .margin({ top: 20 })
      }
      .width('100%')
      .height('100%')
      .backgroundColor('#F5F5F5')

      if (this.showCityDialog) {
        this.cityDialogBuilder()
      }
    }
    .width('100%')
    .height('100%')
  }
}</code></pre>

            <h3>ğŸ“„ CityModel.ets</h3>
            <pre><code class="language-typescript">export class CityModel {
  cities: string[] = []
}</code></pre>
        </div>

        <!-- Steps 3-13 will be added in a separate file due to length -->
        <div class="code-container" id="step-13" style="display: none;">
            <div class="step-info">
                <h4>ğŸ“ Step13 - WebåŠŸèƒ½ï¼ˆå®Œæ•´åŠŸèƒ½55åˆ†ï¼‰</h4>
                <ul>
                    <li>ğŸ‰ åŒ…å«Step01~12æ‰€æœ‰åŠŸèƒ½</li>
                    <li>âœ… æ–°å¢WebPageé¡µé¢</li>
                    <li>âœ… è®¿é—®12306å®˜ç½‘</li>
                    <li>ğŸ’¯ <strong>å…¨éƒ¨55åˆ†åŠŸèƒ½å®Œæˆï¼</strong></li>
                </ul>
            </div>
            <p style="color: #58a6ff; margin-bottom: 20px;">âš ï¸ ç”±äºå®Œæ•´ä»£ç è¿‡é•¿ï¼ŒStep03-13è¯·è®¿é—®ï¼š<a href="code.html" style="color: #58a6ff; text-decoration: underline;">å®Œæ•´ä»£ç å±•ç¤ºé¡µé¢</a></p>
            <p style="color: #8b949e;">æˆ–è€…ä¸‹è½½é¡¹ç›®æºä»£ç æŸ¥çœ‹å®Œæ•´å®ç°ã€‚</p>
        </div>
    </div>

    <footer>
        <p>Â© 2024 HarmonyOS ç«è½¦ç¥¨æŸ¥è¯¢é¡¹ç›® - æ¸è¿›å¼å­¦ä¹ æ•™ç¨‹</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            hljs.highlightAll();

            const badges = document.querySelectorAll('.step-badge');
            const containers = document.querySelectorAll('.code-container');

            badges.forEach(badge => {
                badge.addEventListener('click', () => {
                    badges.forEach(b => b.classList.remove('active'));
                    badge.classList.add('active');

                    const stepNum = badge.getAttribute('data-step');
                    
                    containers.forEach(container => {
                        container.style.display = 'none';
                    });

                    const targetContainer = document.getElementById(\`step-\${stepNum}\`);
                    if (targetContainer) {
                        targetContainer.style.display = 'block';
                        hljs.highlightAll();
                    }
                });
            });
        });
    </script>
</body>
</html>
