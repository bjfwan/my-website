<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç«è½¦ç¥¨æŸ¥è¯¢ - æ¸è¿›å¼ä»£ç æ•™ç¨‹</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>ğŸš„ ç«è½¦ç¥¨æŸ¥è¯¢ç³»ç»Ÿ - æ¸è¿›å¼ä»£ç æ•™ç¨‹</h1>
            <p class="subtitle">æ¯ä¸€æ­¥éƒ½æ˜¯å®Œæ•´å¯è¿è¡Œçš„ä»£ç ï¼Œç›´æ¥å¤åˆ¶æ›¿æ¢å³å¯ âœ¨</p>
        </div>
    </header>

    <div class="container">
        <div class="info-box">
            <h3>ğŸ“– ä½¿ç”¨è¯´æ˜</h3>
            <ul>
                <li><strong>Step01</strong> â†’ å¤åˆ¶ä»£ç åˆ°é¡¹ç›® â†’ è¿è¡Œï¼ˆåŸå¸‚é€‰æ‹©åŠŸèƒ½ï¼‰</li>
                <li><strong>Step02</strong> â†’ å¤åˆ¶ä»£ç <strong>æ›¿æ¢</strong>Step01çš„æ–‡ä»¶ â†’ è¿è¡Œï¼ˆåŸå¸‚+æ—¥æœŸé€‰æ‹©ï¼‰</li>
                <li><strong>Step03-13</strong> â†’ ä¾æ¬¡å¤åˆ¶æ›¿æ¢ï¼Œç´¯ç§¯å®Œæˆæ‰€æœ‰åŠŸèƒ½</li>
                <li>â­ æ ‡è®°è¡¨ç¤ºæœ¬æ­¥éª¤æ–°å¢çš„ä»£ç éƒ¨åˆ†</li>
            </ul>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="showStep(1)">Step01<span>10åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(2)">Step02<span>5åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(3)">Step03<span>3åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(4)">Step04<span>2åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(5)">Step05<span>10åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(6)">Step06<span>3åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(7)">Step07<span>5åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(8)">Step08<span>5åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(9)">Step09<span>3åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(10)">Step10<span>2åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(11)">Step11<span>2åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(12)">Step12<span>3åˆ†</span></button>
            <button class="tab-btn" onclick="showStep(13)">Step13<span>5åˆ†</span></button>
        </div>

        <!-- Step 01 -->
        <div id="step-1" class="step-content active">
            <div class="step-header">
                <h2>Step01 - åŸå¸‚é€‰æ‹©åŠŸèƒ½</h2>
                <span class="score">10åˆ†</span>
            </div>
            <div class="step-desc">
                <p><strong>åŠŸèƒ½ï¼š</strong>è¯»å–city.jsonè·å–åŸå¸‚æ•°æ®ï¼Œæ˜¾ç¤ºå‡ºå‘åœ°/ç›®çš„åœ°é€‰æ‹©ï¼Œå¼¹å‡ºåŸå¸‚åˆ—è¡¨å¯¹è¯æ¡†</p>
            </div>

            <div class="file-block">
                <div class="file-header">
                    <span class="file-name">ğŸ“„ Index.ets</span>
                    <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ å¤åˆ¶ä»£ç </button>
                </div>
                <pre><code class="language-typescript">import router from '@ohos.router'
import { resourceManager } from '@kit.LocalizationKit'
import { util } from '@kit.ArkTS'
import { CityModel } from '../model/CityModel'

@Entry
@Component
struct Index {
  @State startCity: string = 'è¯·é€‰æ‹©'
  @State endCity: string = 'è¯·é€‰æ‹©'
  @State cityList: string[] = []
  @State showCityDialog: boolean = false
  @State selectType: string = ''

  async aboutToAppear() {
    await this.loadCityData()
  }

  async loadCityData() {
    try {
      const context = getContext(this)
      const mgr: resourceManager.ResourceManager = context.resourceManager
      const rawFileData: Uint8Array = await mgr.getRawFileContent('city.json')
      const textDecoder = util.TextDecoder.create('utf-8')
      const jsonStr: string = textDecoder.decodeToString(rawFileData)
      const cityModel: CityModel = JSON.parse(jsonStr)
      this.cityList = cityModel.cities
    } catch (error) {
      console.error('è¯»å–åŸå¸‚æ•°æ®å¤±è´¥:', error)
    }
  }

  openCityDialog(type: string) {
    this.selectType = type
    this.showCityDialog = true
  }

  selectCity(city: string) {
    if (this.selectType === 'start') {
      this.startCity = city
    } else {
      this.endCity = city
    }
    this.showCityDialog = false
  }

  @Builder
  cityDialogBuilder() {
    Column() {
      Text('é€‰æ‹©åŸå¸‚')
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .padding(15)

      List() {
        ForEach(this.cityList, (city: string) => {
          ListItem() {
            Text(city)
              .width('100%')
              .padding(15)
              .onClick(() => this.selectCity(city))
          }
        })
      }
      .height('80%')

      Button('å–æ¶ˆ')
        .width('90%')
        .margin({ top: 10, bottom: 10 })
        .onClick(() => this.showCityDialog = false)
    }
    .width('100%')
    .height('100%')
    .backgroundColor(Color.White)
  }

  build() {
    Stack() {
      Column() {
        Text('ç«è½¦ç¥¨æŸ¥è¯¢')
          .fontSize(24)
          .fontWeight(FontWeight.Bold)
          .margin({ top: 20, bottom: 30 })

        Column() {
          Row() {
            Text('å‡ºå‘åœ°')
              .width(80)
            Text(this.startCity)
              .layoutWeight(1)
              .textAlign(TextAlign.End)
            Image($r('app.media.startIcon'))
              .width(20)
              .height(20)
              .margin({ left: 10 })
          }
          .width('100%')
          .padding(15)
          .backgroundColor(Color.White)
          .borderRadius(8)
          .onClick(() => this.openCityDialog('start'))

          Row() {
            Text('ç›®çš„åœ°')
              .width(80)
            Text(this.endCity)
              .layoutWeight(1)
              .textAlign(TextAlign.End)
            Image($r('app.media.startIcon'))
              .width(20)
              .height(20)
              .margin({ left: 10 })
          }
          .width('100%')
          .padding(15)
          .backgroundColor(Color.White)
          .borderRadius(8)
          .margin({ top: 10 })
          .onClick(() => this.openCityDialog('end'))
        }
        .width('90%')
        .margin({ top: 20 })
      }
      .width('100%')
      .height('100%')
      .backgroundColor('#F5F5F5')

      if (this.showCityDialog) {
        this.cityDialogBuilder()
      }
    }
    .width('100%')
    .height('100%')
  }
}</code></pre>
            </div>

            <div class="file-block">
                <div class="file-header">
                    <span class="file-name">ğŸ“„ CityModel.ets</span>
                    <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ å¤åˆ¶ä»£ç </button>
                </div>
                <pre><code class="language-typescript">export class CityModel {
  cities: string[] = []
}</code></pre>
            </div>
        </div>

        <!-- Step 02 -->
        <div id="step-2" class="step-content">
            <div class="step-header">
                <h2>Step02 - æ—¥æœŸé€‰æ‹©åŠŸèƒ½</h2>
                <span class="score">5åˆ†</span>
            </div>
            <div class="step-desc">
                <p><strong>æ–°å¢ï¼š</strong>æ—¥æœŸé€‰æ‹©åŠŸèƒ½ï¼Œé»˜è®¤æ˜¾ç¤ºä»Šå¤©æ—¥æœŸ</p>
                <p><strong>åŒ…å«ï¼š</strong>Step01æ‰€æœ‰åŠŸèƒ½ + æ—¥æœŸé€‰æ‹©</p>
            </div>

            <div class="file-block">
                <div class="file-header">
                    <span class="file-name">ğŸ“„ Index.etsï¼ˆå®Œæ•´ä»£ç ï¼Œâ­æ ‡è®°æ–°å¢ï¼‰</span>
                    <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ å¤åˆ¶ä»£ç </button>
                </div>
                <pre><code class="language-typescript">import router from '@ohos.router'
import { resourceManager } from '@kit.LocalizationKit'
import { util } from '@kit.ArkTS'
import { CityModel } from '../model/CityModel'

@Entry
@Component
struct Index {
  @State startCity: string = 'è¯·é€‰æ‹©'
  @State endCity: string = 'è¯·é€‰æ‹©'
  @State selectedDate: string = this.getTodayDate()  // â­ æ–°å¢ï¼šæ—¥æœŸçŠ¶æ€
  @State cityList: string[] = []
  @State showCityDialog: boolean = false
  @State selectType: string = ''

  async aboutToAppear() {
    await this.loadCityData()
  }

  // â­ æ–°å¢ï¼šè·å–ä»Šå¤©æ—¥æœŸ
  getTodayDate(): string {
    const date = new Date()
    const year = date.getFullYear()
    const month = (date.getMonth() + 1).toString().padStart(2, '0')
    const day = date.getDate().toString().padStart(2, '0')
    return `${year}-${month}-${day}`
  }

  async loadCityData() {
    try {
      const context = getContext(this)
      const mgr: resourceManager.ResourceManager = context.resourceManager
      const rawFileData: Uint8Array = await mgr.getRawFileContent('city.json')
      const textDecoder = util.TextDecoder.create('utf-8')
      const jsonStr: string = textDecoder.decodeToString(rawFileData)
      const cityModel: CityModel = JSON.parse(jsonStr)
      this.cityList = cityModel.cities
    } catch (error) {
      console.error('è¯»å–åŸå¸‚æ•°æ®å¤±è´¥:', error)
    }
  }

  openCityDialog(type: string) {
    this.selectType = type
    this.showCityDialog = true
  }

  selectCity(city: string) {
    if (this.selectType === 'start') {
      this.startCity = city
    } else {
      this.endCity = city
    }
    this.showCityDialog = false
  }

  @Builder
  cityDialogBuilder() {
    Column() {
      Text('é€‰æ‹©åŸå¸‚')
        .fontSize(20)
        .fontWeight(FontWeight.Bold)
        .padding(15)

      List() {
        ForEach(this.cityList, (city: string) => {
          ListItem() {
            Text(city)
              .width('100%')
              .padding(15)
              .onClick(() => this.selectCity(city))
          }
        })
      }
      .height('80%')

      Button('å–æ¶ˆ')
        .width('90%')
        .margin({ top: 10, bottom: 10 })
        .onClick(() => this.showCityDialog = false)
    }
    .width('100%')
    .height('100%')
    .backgroundColor(Color.White)
  }

  build() {
    Stack() {
      Column() {
        Text('ç«è½¦ç¥¨æŸ¥è¯¢')
          .fontSize(24)
          .fontWeight(FontWeight.Bold)
          .margin({ top: 20, bottom: 30 })

        Column() {
          Row() {
            Text('å‡ºå‘åœ°')
              .width(80)
            Text(this.startCity)
              .layoutWeight(1)
              .textAlign(TextAlign.End)
            Image($r('app.media.startIcon'))
              .width(20)
              .height(20)
              .margin({ left: 10 })
          }
          .width('100%')
          .padding(15)
          .backgroundColor(Color.White)
          .borderRadius(8)
          .onClick(() => this.openCityDialog('start'))

          Row() {
            Text('ç›®çš„åœ°')
              .width(80)
            Text(this.endCity)
              .layoutWeight(1)
              .textAlign(TextAlign.End)
            Image($r('app.media.startIcon'))
              .width(20)
              .height(20)
              .margin({ left: 10 })
          }
          .width('100%')
          .padding(15)
          .backgroundColor(Color.White)
          .borderRadius(8)
          .margin({ top: 10 })
          .onClick(() => this.openCityDialog('end'))

          // â­â­â­ æ–°å¢ï¼šæ—¥æœŸé€‰æ‹©UI â­â­â­
          Row() {
            Text('å‡ºå‘æ—¥æœŸ')
              .width(80)
            Text(this.selectedDate)
              .layoutWeight(1)
              .textAlign(TextAlign.End)
            Image($r('app.media.startIcon'))
              .width(20)
              .height(20)
              .margin({ left: 10 })
          }
          .width('100%')
          .padding(15)
          .backgroundColor(Color.White)
          .borderRadius(8)
          .margin({ top: 10 })
          .onClick(() => {
            DatePickerDialog.show({
              start: new Date(),
              selected: new Date(this.selectedDate),
              onAccept: (value: DatePickerResult) => {
                const month = value.month !== undefined ? value.month + 1 : 1
                const day = value.day !== undefined ? value.day : 1
                this.selectedDate = `${value.year}-${month.toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`
              }
            })
          })
          // â­â­â­ æ–°å¢ç»“æŸ â­â­â­
        }
        .width('90%')
        .margin({ top: 20 })
      }
      .width('100%')
      .height('100%')
      .backgroundColor('#F5F5F5')

      if (this.showCityDialog) {
        this.cityDialogBuilder()
      }
    }
    .width('100%')
    .height('100%')
  }
}</code></pre>
            </div>

            <div class="file-block">
                <div class="file-header">
                    <span class="file-name">ğŸ“„ CityModel.ets</span>
                    <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ å¤åˆ¶ä»£ç </button>
                </div>
                <pre><code class="language-typescript">export class CityModel {
  cities: string[] = []
}</code></pre>
            </div>
        </div>

        <!-- Step 03-13 æç¤º -->
        <div id="step-3" class="step-content">
            <div class="step-header">
                <h2>Step03-13 å®Œæ•´ä»£ç </h2>
            </div>
            <div class="info-box" style="text-align: center; padding: 60px 20px;">
                <h3>ğŸš§ ä»£ç ç”Ÿæˆä¸­...</h3>
                <p>Step03-13çš„å®Œæ•´ä»£ç æ­£åœ¨å‡†å¤‡ä¸­</p>
                <p style="color: #666; margin-top: 20px;">åŒ…å«ï¼šæŸ¥è¯¢åŠŸèƒ½ã€ç½‘ç»œè¯·æ±‚ã€åˆ—è¡¨å±•ç¤ºã€è¯¦ç»†ä¿¡æ¯ã€é€šçŸ¥ã€æ•°æ®ç®¡ç†ã€Webè®¿é—®ç­‰æ‰€æœ‰åŠŸèƒ½</p>
            </div>
        </div>

        <div id="step-4" class="step-content"><div class="info-box" style="text-align: center; padding: 60px;">ğŸš§ Step04 ä»£ç å‡†å¤‡ä¸­...</div></div>
        <div id="step-5" class="step-content"><div class="info-box" style="text-align: center; padding: 60px;">ğŸš§ Step05 ä»£ç å‡†å¤‡ä¸­...</div></div>
        <div id="step-6" class="step-content"><div class="info-box" style="text-align: center; padding: 60px;">ğŸš§ Step06 ä»£ç å‡†å¤‡ä¸­...</div></div>
        <div id="step-7" class="step-content"><div class="info-box" style="text-align: center; padding: 60px;">ğŸš§ Step07 ä»£ç å‡†å¤‡ä¸­...</div></div>
        <div id="step-8" class="step-content"><div class="info-box" style="text-align: center; padding: 60px;">ğŸš§ Step08 ä»£ç å‡†å¤‡ä¸­...</div></div>
        <div id="step-9" class="step-content"><div class="info-box" style="text-align: center; padding: 60px;">ğŸš§ Step09 ä»£ç å‡†å¤‡ä¸­...</div></div>
        <div id="step-10" class="step-content"><div class="info-box" style="text-align: center; padding: 60px;">ğŸš§ Step10 ä»£ç å‡†å¤‡ä¸­...</div></div>
        <div id="step-11" class="step-content"><div class="info-box" style="text-align: center; padding: 60px;">ğŸš§ Step11 ä»£ç å‡†å¤‡ä¸­...</div></div>
        <div id="step-12" class="step-content"><div class="info-box" style="text-align: center; padding: 60px;">ğŸš§ Step12 ä»£ç å‡†å¤‡ä¸­...</div></div>
        <div id="step-13" class="step-content"><div class="info-box" style="text-align: center; padding: 60px;">ğŸš§ Step13 ä»£ç å‡†å¤‡ä¸­...</div></div>
    </div>

    <footer>
        <p>Â© 2024 HarmonyOS ç«è½¦ç¥¨æŸ¥è¯¢ - æ¸è¿›å¼ä»£ç æ•™ç¨‹</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/typescript.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
