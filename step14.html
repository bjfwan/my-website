<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 14 - é…ç½®æ–‡ä»¶è¯´æ˜</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="script.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <h1>ğŸš„ Step 14 - é…ç½®æ–‡ä»¶è¯´æ˜</h1>
            <p class="subtitle">å¿…è¦çš„é¡¹ç›®é…ç½®æ–‡ä»¶</p>
            <a href="index.html" class="back-btn">â† è¿”å›é¦–é¡µ</a>
        </div>
    </header>

    <div class="container">
        <div class="info-box" style="background: #fff3cd; border-left: 4px solid #ffc107;">
            <h3>âš ï¸ é‡è¦æç¤º</h3>
            <p><strong>è¿™äº›é…ç½®æ–‡ä»¶ä¸èƒ½ä¸ºç©ºï¼</strong>å¿…é¡»åŒ…å«å¿…è¦çš„é…ç½®ä¿¡æ¯ï¼Œå¦åˆ™é¡¹ç›®æ— æ³•è¿è¡Œã€‚</p>
            <ul>
                <li>âŒ ä¸è¦åˆ›å»ºç©ºç™½æ–‡ä»¶</li>
                <li>âœ… ç›´æ¥ä»åŸºå‡†é¡¹ç›®å¤åˆ¶å®Œæ•´æ–‡ä»¶</li>
                <li>âœ… ä»…éœ€ä¿®æ”¹å°‘é‡é…ç½®ï¼ˆå¦‚IAM Tokenï¼‰</li>
            </ul>
        </div>

        <div class="file-block">
            <div class="file-header">
                <span>ğŸ“„ build-profile.json5ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰</span>
                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ å¤åˆ¶ä»£ç </button>
            </div>
            <pre><code class="language-json">{
  "app": {
    "signingConfigs": [],
    "products": [
      {
        "name": "default",
        "signingConfig": "default",
        "targetSdkVersion": "5.1.0(18)",
        "compatibleSdkVersion": "5.1.0(18)",
        "runtimeOS": "HarmonyOS",
        "buildOption": {
          "strictMode": {
            "caseSensitiveCheck": true,
            "useNormalizedOHMUrl": true
          }
        }
      }
    ],
    "buildModeSet": [
      {
        "name": "debug",
      },
      {
        "name": "release"
      }
    ]
  },
  "modules": [
    {
      "name": "entry",
      "srcPath": "./entry",
      "targets": [
        {
          "name": "default",
          "applyToProducts": ["default"]
        }
      ]
    }
  ]
}
</code></pre>
            <div class="info-box">
                <p><strong>å…³é”®é…ç½®ï¼š</strong></p>
                <ul>
                    <li><code>targetSdkVersion</code>: ç›®æ ‡SDKç‰ˆæœ¬</li>
                    <li><code>compatibleSdkVersion</code>: å…¼å®¹SDKç‰ˆæœ¬</li>
                    <li><code>modules</code>: æ¨¡å—å£°æ˜</li>
                </ul>
            </div>
        </div>

        <div class="file-block">
            <div class="file-header">
                <span>ğŸ“„ entry/build-profile.json5</span>
                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ å¤åˆ¶ä»£ç </button>
            </div>
            <pre><code class="language-json">{
  "apiType": "stageMode",
  "buildOption": {
    "resOptions": {
      "copyCodeResource": {
        "enable": false
      }
    }
  },
  "buildOptionSet": [
    {
      "name": "release",
      "arkOptions": {
        "obfuscation": {
          "ruleOptions": {
            "enable": false,
            "files": ["./obfuscation-rules.txt"]
          }
        }
      }
    },
  ],
  "targets": [
    {
      "name": "default"
    },
    {
      "name": "ohosTest"
    }
  ]
}
</code></pre>
            <div class="info-box">
                <p><strong>å…³é”®é…ç½®ï¼š</strong></p>
                <ul>
                    <li><code>apiType</code>: å¿…é¡»ä¸º"stageMode"</li>
                    <li><code>targets</code>: æ„å»ºç›®æ ‡é…ç½®</li>
                </ul>
            </div>
        </div>

        <div class="file-block">
            <div class="file-header">
                <span>ğŸ“„ entry/src/main/module.json5ï¼ˆæœ€é‡è¦ï¼‰</span>
                <button class="copy-btn" onclick="copyCode(this)">ğŸ“‹ å¤åˆ¶ä»£ç </button>
            </div>
            <pre><code class="language-json">{
  "module": {
    "name": "entry",
    "type": "entry",
    "description": "$string:module_desc",
    "mainElement": "EntryAbility",
    "deviceTypes": ["phone"],
    "deliveryWithInstall": true,
    "installationFree": false,
    "pages": "$profile:main_pages",
    "requestPermissions": [
      {
        "name": "ohos.permission.INTERNET"
      },
      {
        "name": "ohos.permission.PLACE_CALL",
        "usedScene": {
          "abilities": ["EntryAbility"],
          "when": "inuse"
        }
      },
      {
        "name": "ohos.permission.ANSWER_CALL",
        "reason": "$string:reason_make_call",
        "usedScene": {
          "abilities": ["EntryAbility"],
          "when": "inuse"
        }
      }
    ],
    "abilities": [
      {
        "name": "EntryAbility",
        "srcEntry": "./ets/entryability/EntryAbility.ets",
        "description": "$string:EntryAbility_desc",
        "icon": "$media:layered_image",
        "label": "$string:EntryAbility_label",
        "startWindowIcon": "$media:startIcon",
        "startWindowBackground": "$color:start_window_background",
        "exported": true,
        "skills": [
          {
            "entities": ["entity.system.home"],
            "actions": ["ohos.want.action.home"]
          }
        ]
      }
    ],
    "extensionAbilities": [
      {
        "name": "EntryBackupAbility",
        "srcEntry": "./ets/entrybackupability/EntryBackupAbility.ets",
        "type": "backup",
        "exported": false,
        "metadata": [
          {
            "name": "ohos.extension.backup",
            "resource": "$profile:backup_config"
          }
        ],
      }
    ]
  }
}
</code></pre>
            <div class="info-box" style="background: #f8d7da; border-left: 4px solid #dc3545;">
                <h3>ğŸš¨ å¿…é¡»ä¿ç•™çš„å…³é”®é…ç½®</h3>
                <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                    <tr style="background: #fff; border-bottom: 1px solid #ddd;">
                        <th style="padding: 10px; text-align: left;">é…ç½®é¡¹</th>
                        <th style="padding: 10px; text-align: left;">ä½œç”¨</th>
                        <th style="padding: 10px; text-align: left;">ç¼ºå°‘åæœ</th>
                    </tr>
                    <tr style="background: #fff; border-bottom: 1px solid #ddd;">
                        <td style="padding: 10px;"><code>mainElement</code></td>
                        <td style="padding: 10px;">åº”ç”¨å…¥å£</td>
                        <td style="padding: 10px;">âŒ åº”ç”¨æ— æ³•å¯åŠ¨</td>
                    </tr>
                    <tr style="background: #fff; border-bottom: 1px solid #ddd;">
                        <td style="padding: 10px;"><code>abilities</code></td>
                        <td style="padding: 10px;">Abilityé…ç½®</td>
                        <td style="padding: 10px;">âŒ åº”ç”¨æ— æ³•è¿è¡Œ</td>
                    </tr>
                    <tr style="background: #fff; border-bottom: 1px solid #ddd;">
                        <td style="padding: 10px;"><code>ohos.permission.INTERNET</code></td>
                        <td style="padding: 10px;">ç½‘ç»œæƒé™</td>
                        <td style="padding: 10px;">âŒ æ— æ³•æŸ¥è¯¢è½¦ç¥¨</td>
                    </tr>
                    <tr style="background: #fff; border-bottom: 1px solid #ddd;">
                        <td style="padding: 10px;"><code>ohos.permission.PLACE_CALL</code></td>
                        <td style="padding: 10px;">æ‹¨å·æƒé™</td>
                        <td style="padding: 10px;">âŒ ç”µè¯åŠŸèƒ½ä¸å¯ç”¨</td>
                    </tr>
                    <tr style="background: #fff;">
                        <td style="padding: 10px;"><code>pages</code></td>
                        <td style="padding: 10px;">é¡µé¢è·¯ç”±</td>
                        <td style="padding: 10px;">âŒ é¡µé¢æ— æ³•è·³è½¬</td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="info-box" style="background: #d4edda; border-left: 4px solid #28a745;">
            <h3>âœ… æœ€ä½³å®è·µ</h3>
            <ol>
                <li><strong>ç›´æ¥å¤åˆ¶ï¼š</strong>ä»åŸºå‡†é¡¹ç›®ç›´æ¥å¤åˆ¶è¿™ä¸‰ä¸ªé…ç½®æ–‡ä»¶</li>
                <li><strong>æœ€å°ä¿®æ”¹ï¼š</strong>åªéœ€ä¿®æ”¹<code>HttpUtil.ets</code>ä¸­çš„IAM Token</li>
                <li><strong>SDKç‰ˆæœ¬ï¼š</strong>å¦‚æœç¼–è¯‘æŠ¥é”™ï¼Œæ£€æŸ¥SDKç‰ˆæœ¬æ˜¯å¦åŒ¹é…</li>
                <li><strong>èµ„æºæ–‡ä»¶ï¼š</strong>ç¡®ä¿<code>city.json</code>å’Œå›¾ç‰‡èµ„æºå·²æ”¾ç½®</li>
            </ol>
        </div>

        <div class="info-box">
            <h3>ğŸ“¦ å®Œæ•´é¡¹ç›®ç»“æ„</h3>
            <pre style="background: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto;"><code>TestTrain/
â”œâ”€â”€ AppScope/
â”‚   â””â”€â”€ app.json5
â”œâ”€â”€ entry/
â”‚   â”œâ”€â”€ build-profile.json5          â† å¿…éœ€
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main/
â”‚   â”‚       â”œâ”€â”€ ets/
â”‚   â”‚       â”‚   â”œâ”€â”€ entryability/
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ EntryAbility.ets
â”‚   â”‚       â”‚   â”œâ”€â”€ model/
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ CityModel.ets
â”‚   â”‚       â”‚   â”œâ”€â”€ pages/
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ Index.ets
â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ DetailPage.ets
â”‚   â”‚       â”‚   â”‚   â””â”€â”€ WebPage.ets
â”‚   â”‚       â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”‚       â”œâ”€â”€ HttpUtil.ets
â”‚   â”‚       â”‚       â””â”€â”€ PreferencesUtil.ets
â”‚   â”‚       â”œâ”€â”€ module.json5         â† å¿…éœ€
â”‚   â”‚       â””â”€â”€ resources/
â”‚   â”‚           â”œâ”€â”€ base/media/      â† æ”¾ç½®å›¾ç‰‡
â”‚   â”‚           â””â”€â”€ rawfile/
â”‚   â”‚               â””â”€â”€ city.json    â† å¿…éœ€
â”œâ”€â”€ build-profile.json5              â† å¿…éœ€
â”œâ”€â”€ hvigorfile.ts
â””â”€â”€ oh-package.json5
</code></pre>
        </div>

        <div class="summary-box" style="background: linear-gradient(135deg, #007bff 0%, #0056b3 100%); color: white; border-radius: 8px; padding: 30px; margin-top: 40px; text-align: center;">
            <h3 style="font-size: 24px; margin-bottom: 10px;">ğŸ¯ é…ç½®å®Œæˆåå³å¯è¿è¡Œ</h3>
            <p style="font-size: 16px; opacity: 0.95;">é…ç½®æ–‡ä»¶æ˜¯é¡¹ç›®çš„åŸºç¡€ï¼Œæ­£ç¡®é…ç½®åå°±èƒ½è¿è¡Œå®Œæ•´çš„ç«è½¦ç¥¨æŸ¥è¯¢ç³»ç»Ÿï¼</p>
        </div>
    </div>

    <footer>
        <p>Â© 2024 HarmonyOS ç«è½¦ç¥¨æŸ¥è¯¢ - é…ç½®æ–‡ä»¶è¯´æ˜</p>
    </footer>
</body>
</html>
